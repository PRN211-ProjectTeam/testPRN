



<style>
	#container {
		height: 400px;
	}

	.highcharts-figure,
	.highcharts-data-table table {
		min-width: 310px;
		max-width: 800px;
		margin: 1em auto;
	}

	.highcharts-data-table table {
		font-family: Verdana, sans-serif;
		border-collapse: collapse;
		border: 1px solid #ebebeb;
		margin: 10px auto;
		text-align: center;
		width: 100%;
		max-width: 500px;
	}

	.highcharts-data-table caption {
		padding: 1em 0;
		font-size: 1.2em;
		color: #555;
	}

	.highcharts-data-table th {
		font-weight: 600;
		padding: 0.5em;
	}

	.highcharts-data-table td,
	.highcharts-data-table th,
	.highcharts-data-table caption {
		padding: 0.5em;
	}

	.highcharts-data-table thead tr,
	.highcharts-data-table tr:nth-child(even) {
		background: #f8f8f8;
	}

	.highcharts-data-table tr:hover {
		background: #f1f7ff;
	}

</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<figure class="highcharts-figure">
	<div id="container"></div>
	<p class="highcharts-description">
		Chart showing The Avareate Point by Gener
	</p>
</figure>

<script>

	async function main() {
		const response = await fetch('@Url.Action("avg_comment_person", "admin")', {
			method: "get",
			headers: { "Content-Type": "application/json" },
		})
		await response.json()
			.then((data) => {

				var arr = []
				var render = []
				arr = JSON.parse(data)
				console.log(arr)
				for (let i = 0; i < arr.length; i++) {
					var person_name = (JSON.stringify(arr[i].person_name)).replaceAll('"', '')
					var person_total_comment = (JSON.stringify(arr[i].person_total_comment))
					var item = [person_name, parseFloat(person_total_comment)]
					render.push(item)
				}
				console.log(render)
				return render;
			})
			.then((render) => {
				Highcharts.chart('container', {
					chart: {
						type: 'column'
					},
					title: {
						text: 'Person with hight comment'
					},
					subtitle: {
						text: 'This Chart is list person with hight comment'
					},
					xAxis: {
						type: 'Gener',
						labels: {
							rotation: -45,
							style: {
								fontSize: '13px',
								fontFamily: 'Verdana, sans-serif'
							}
						}
					},
					yAxis: {
						min: 0,
						title: {
							text: 'Point'
						}
					},
					legend: {
						enabled: false
					},
					tooltip: {
						pointFormat: 'Commemt Count: <b>{point.y:.1f} point</b>'
					},
					series: [{
						name: 'Commemt Count',
						data: render,
						dataLabels: {
							enabled: true,
							rotation: -90,
							color: '#FFFFFF',
							align: 'right',
							format: '{point.y:.1f}', // one decimal
							y: 10, // 10 pixels down from the top
							style: {
								fontSize: '13px',
								fontFamily: 'Verdana, sans-serif'
							}
						}
					}]
				});
			})
	}
	main()

			

</script>